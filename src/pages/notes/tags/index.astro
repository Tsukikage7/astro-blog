---
import TaxaLayout from "@components/notes/TaxaLayout.astro";
import { getCollection } from "astro:content";
import { slugify } from "@lib/textConverter";

const taxonomy = "tags";

const allPosts = await getCollection("notes");

let allTaxa: string[] = [];
allPosts.forEach(post => {
  if (post.data.tags && Array.isArray(post.data.tags)) {
    post.data.tags.forEach(tag => {
      allTaxa.push(slugify(tag));
    });
  }
});

const taxa = [...new Set(allTaxa)].sort((a, b) => a.localeCompare(b));
---

<TaxaLayout taxonomy={taxonomy} taxa={taxa} allTaxa={allTaxa} />
