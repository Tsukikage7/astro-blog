---
import { getCollection, type CollectionEntry, render } from "astro:content";
import EntryLayout from "@components/blog/EntryLayout.astro";

export async function getStaticPaths() {
  const isDev = import.meta.env.DEV;

  const blogEntries = await getCollection("blog", ({ data }) => {
    
    
    if (isDev) {
      return true; 
    }
    return data.draft !== true;
  });

  const paths = blogEntries.map((entry) => ({
    params: { entry: entry.id },
    props: { entry },
  }));

  console.log("paths", paths);
  return paths;
}

interface Props {
  entry: CollectionEntry<"blog">;
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<EntryLayout entry={entry}>
  <Content />
</EntryLayout>
